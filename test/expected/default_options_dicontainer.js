// This file was autogenerated by grunt-closure-dicontainer task.
// Please do not edit.
goog.provide('app.DiContainer');

goog.require('App');
goog.require('app.Router');

/**
 * @constructor
 */
app.DiContainer = function() {
  this.rules = [];
};

/**
 * Resolving rules for DI Container.
 * - resolve: Type or array of types going to be resolved.
 * - as: Which type should be returned instead.
 * - with: Named values for arguments we know in runtime therefore have
 *      to be configured in runtime too.
 * - by: A factory method for custom resolving.
 * @typedef {{
 *   resolve: (Object),
 *   as: (Object|undefined),
 *   with: (Object|undefined),
 *   by: (Function|undefined)
 * }}
 */
app.DiContainer.Rule;

/**
 * @type {Array.<app.DiContainer.Rule>}
 * @protected
 */
app.DiContainer.prototype.rules;

/**
 * @param {Array.<app.DiContainer.Rule>} rules
 */
app.DiContainer.prototype.configure = function(rules) {
  this.rules.push.apply(this.rules, rules);
};

/**
 * Factory for App.
 * @return {App}
 */
app.DiContainer.prototype.resolveApp = function() {
  this.appRouter = new app.Router;
  this.App = new App(this.appRouter);
  return this.App;
};

/**
 * NOTE: Do not optimize it without dead code removal etc. check.
 * @protected
 */
app.DiContainer.prototype.getRuleFor = function(type) {
  var rule;
  for (var i = 0; i < this.rules.length; i++) {
    rule = this.rules[i];
    if (rule.resolve == type) break;
  }
  rule = rule || {};
  rule['with'] = rule['with'] || {};
  return rule;
};