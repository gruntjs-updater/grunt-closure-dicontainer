module.exports = (diContainerFactoryName, diContainerClassName) ->

  createGoogRequire = (namespace) ->
    "goog.require('#{namespace}');"

  (requiredNamespaces) ->
    requiredNamespaces.push 'goog.Disposable'
    requiredNamespaces.sort()

    """
      // This file was autogenerated by grunt-closure-dicontainer task.
      // Please do not edit.
      goog.provide('#{diContainerFactoryName}');

      #{requiredNamespaces.map(createGoogRequire).join '\n'}

      /**
       * Factory for #{diContainerClassName}.
       * @param {Object=} config Server side generated app config.
       * @return {#{diContainerClassName}}
       */
      #{diContainerFactoryName} = function(config) {
        return new #{diContainerClassName}(config);
      };

      /**
       * DI container.
       *
       * @param {Object=} config Server side generated app config.
       * @constructor
       * @extends {goog.Disposable}
       */
      #{diContainerClassName} = function(config) {
        goog.base(this);
        if (config)
          this.config = config;
      };
      goog.inherits(#{diContainerClassName}, goog.Disposable);

      /**
       * @type {Object}
       */
      #{diContainerClassName}.prototype.config = null;
    """